import{a as f}from"./chunk-V4YX5ONG.js";import{a as m}from"./chunk-2IAGA2KS.js";import{b as d}from"./chunk-MAZQTZTP.js";import{Gb as l,Hb as u,R as e,ab as n,c as o,m as h,p as r}from"./chunk-D4YDXMC2.js";var p=class{constructor(){this.cost_dollar=0,this.subtotal_dollar=0,this.total_dollar=0,this.discount_dollar=0,this.discount2_dollar=0,this.total_dollar_discount_2=0,this.vat_dollar=0,this.total_qty=0}},_=function(t){return t.unit_price_usd="unit_price_usd",t.whole_price_usd="whole_price_usd",t}(_||{});var j=(()=>{class t{constructor(){this.http=r(n),this.apiService=r(u),this.notificationService=r(l),this.stockService=r(d),this.cashBalanceService=r(m),this.historyService=r(f),this.invoice=e([]),this.selected_customer=e(null),this.payment_amount=e(0),this.signal_submited=e(!1),this.signal_submit_loading=e(!1),this.reset$=new o(!1),this.factor=e(1),this.barcodeResponse=new o(null),this.customerDialogVisible=e(!1)}submitBarcode(s){this.http.get(`${this.apiService.host()}/stock/item/${s}`).subscribe({next:i=>{i?this.barcodeResponse.next(i):this.notificationService.showError("Item not found!","home")},error:i=>{this.notificationService.handleError(i.error,"home")}})}checkout(s,i){this.signal_submited.set(!0),this.signal_submit_loading.set(!0);let a=null;s.partner_id_fk&&i&&(a={amount:i,partner_id_fk:s.partner_id_fk,payment_date:s.order_datetime}),this.http.post(`${this.apiService.host()}/supply`,{invoice:s,payment:a}).subscribe({next:c=>{this.notificationService.showSuccess("Invoice submitted","home")},error:c=>{this.notificationService.showError(c.error.message,"home"),this.signal_submit_loading.set(!1)},complete:()=>{this.stockService.getItems(),this.invoice.set([]),this.signal_submited.set(!1),this.signal_submit_loading.set(!1),this.reset$.next(!0),this.customerDialogVisible.set(!1),this.cashBalanceService.getBalance(),this.historyService.fetchPurchasesHistory()}})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();export{p as a,_ as b,j as c};
