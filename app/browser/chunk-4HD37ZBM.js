import{a as Z,b as $}from"./chunk-42IGJLG2.js";import{a as me,b as ce}from"./chunk-LH4OTLL6.js";import{c as ee}from"./chunk-UHFQUA5D.js";import{a as te}from"./chunk-7THMIGUD.js";import{b as se}from"./chunk-TAW6AXMG.js";import{b as le,c as re}from"./chunk-V5RHMPQH.js";import{b as J}from"./chunk-H6U4N3TG.js";import{i as ae,j as oe}from"./chunk-LH73PZKM.js";import{$b as j,A as f,Aa as k,Ba as w,Da as V,Ea as F,Fa as C,Fc as ne,Gc as ie,Hb as P,N as l,Na as E,Nb as R,Oa as M,Pb as b,Rb as z,Sb as L,X as c,Xa as N,Xb as A,Yb as G,Z as r,Za as I,Zb as W,aa as B,bb as O,bc as U,cb as q,da as n,ea as i,fa as p,ja as y,ka as s,la as _,lc as K,mc as Q,nb as H,nc as X,oc as Y,s as d,t as x,va as o,xa as D,z as g,za as T}from"./chunk-4RWQR7BF.js";var pe=()=>({width:"65vw"}),S=t=>({"ng-invalid ng-dirty":t});function ue(t,u){t&1&&(n(0,"h4",4),p(1,"i",12),o(2," Cash Management "),i())}function de(t,u){t&1&&(n(0,"small",22),o(1,"Option is required."),i())}function _e(t,u){t&1&&(n(0,"small",22),o(1,"amount is required."),i())}function he(t,u){t&1&&(n(0,"small",22),o(1,"Notes is required."),i())}function ge(t,u){if(t&1){let e=y();n(0,"form",13),s("ngSubmit",function(){g(e);let a=_();return f(a.submitCash())}),n(1,"div",14)(2,"div",15)(3,"label"),o(4,"Option"),n(5,"span",16),o(6,"*"),i()(),p(7,"p-dropdown",17),c(8,de,2,0,"small",18),i(),n(9,"div",15)(10,"label"),o(11,"Amount"),n(12,"span",16),o(13,"*"),i()(),p(14,"p-inputNumber",19),c(15,_e,2,0,"small",18),i(),n(16,"div",20)(17,"label"),o(18,"Notes"),i(),p(19,"input",21),c(20,he,2,0,"small",18),i()()()}if(t&2){let e=_();r("formGroup",e.cashForm),l(7),r("autoOptionFocus",!1)("options",e.transactionOptions)("ngClass",C(9,S,(e.transaction_type==null?null:e.transaction_type.invalid)&&((e.transaction_type==null?null:e.transaction_type.dirty)||(e.transaction_type==null?null:e.transaction_type.touched)||e.submitted))),l(),r("ngIf",(e.transaction_type==null?null:e.transaction_type.invalid)&&((e.transaction_type==null?null:e.transaction_type.dirty)||(e.transaction_type==null?null:e.transaction_type.touched)||e.submitted)),l(6),r("ngClass",C(11,S,(e.amount==null?null:e.amount.invalid)&&((e.amount==null?null:e.amount.dirty)||(e.amount==null?null:e.amount.touched)||e.submitted))),l(),r("ngIf",(e.amount==null?null:e.amount.invalid)&&((e.amount==null?null:e.amount.dirty)||(e.amount==null?null:e.amount.touched)||e.submitted)),l(4),r("ngClass",C(13,S,(e.transaction_notes==null?null:e.transaction_notes.invalid)&&((e.transaction_notes==null?null:e.transaction_notes.dirty)||(e.transaction_notes==null?null:e.transaction_notes.touched)||e.submitted))),l(),r("ngIf",(e.transaction_notes==null?null:e.transaction_notes.invalid)&&((e.transaction_notes==null?null:e.transaction_notes.dirty)||(e.transaction_notes==null?null:e.transaction_notes.touched)||e.submitted))}}function fe(t,u){if(t&1){let e=y();n(0,"p-button",23),s("onClick",function(){g(e);let a=_();return f(a.toggleCashDialog())}),i(),n(1,"p-button",24),s("onClick",function(){g(e);let a=_();return f(a.submitCash())}),i()}}var je=(()=>{class t{constructor(){this.balanceService=d(te),this.fb=d(j),this.stockService=d(se),this.router=d(H),this.loading_balance=this.balanceService.loading_balance,this.balance=this.balanceService.balance,this.cashDialogVisible=this.balanceService.cashDialogVisible,this.submitted=!1,this.transactionOptions=[{name:"Add",value:"ADD"},{name:"Remove",value:"REMOVE"}],this.cashForm=this.fb.group({product_id_fk:[null],transaction_type:[{value:null,disabled:!1},b.required],amount:[null,b.required],transaction_notes:[null,b.required],exchange_rate:[this.stockService.exchangeRate().rate_value]})}refreshBalance(){this.balanceService.getBalance()}get transaction_type(){return this.cashForm.get("transaction_type")}get amount(){return this.cashForm.get("amount")}get transaction_notes(){return this.cashForm.get("transaction_notes")}openCashDialog(){this.balanceService.cashDialogVisible.set(!0)}toggleCashDialog(){this.balanceService.cashDialogVisible.set(!1)}submitCash(){this.submitted=!0,this.cashForm.valid&&(this.cashForm.patchValue({exchange_rate:this.stockService.exchangeRate().rate_value}),this.balanceService.submitCash(this.cashForm.value))}resetDialog(){this.submitted=!1,this.cashForm.reset(),this.balanceService.cashDialogVisible.set(!1)}navigateHistory(){this.router.navigate(["/history/cash-history"])}static{this.\u0275fac=function(m){return new(m||t)}}static{this.\u0275cmp=x({type:t,selectors:[["cash-balance"]],standalone:!0,features:[V],decls:14,vars:10,consts:[["styleClass","text-center"],["pTemplate","header"],[1,"flex","justify-content-around","align-items-center"],["loaderClass","flex-grow-1 flex-shrink-1",2,"width","30%",3,"isLoading","loadingBar"],[1,"m-0"],["layout","vertical"],["label","refresh","icon","pi pi-refresh","size","small",3,"onClick"],["label","modify","icon","pi pi-file-edit","size","small","severity","warning",3,"onClick"],["label","history","icon","pi pi-history","size","small","severity","contrast",3,"onClick"],["header","Cash Correction","styleClass","p-fluid","position","top",3,"visibleChange","onHide","visible","modal"],["pTemplate","content"],["pTemplate","footer"],[1,"pi","pi-money-bill","pi-fw"],[3,"ngSubmit","formGroup"],[1,"formgrid","grid"],[1,"field","col-12","md:col-3"],[1,"text-red-600"],["scrollHeight","400px","appendTo","body","formControlName","transaction_type","optionLabel","name","optionValue","value","placeholder","transaction type ...",3,"autoOptionFocus","options","ngClass"],["class","p-error",4,"ngIf"],["formControlName","amount","inputId","currency-us","mode","currency","currency","USD","locale","en-US",3,"ngClass"],[1,"field","col-12","md:col-6"],["type","text","spellcheck","false","pInputText","","formControlName","transaction_notes",1,"w-full",3,"ngClass"],[1,"p-error"],["label","Cancel","icon","pi pi-times","size","small","severity","secondary",3,"onClick"],["severity","success","label","Save","icon","pi pi-check","size","small",3,"onClick"]],template:function(m,a){m&1&&(n(0,"p-panel",0),c(1,ue,3,0,"ng-template",1),n(2,"div",2)(3,"text-with-loading",3)(4,"h2",4),o(5),E(6,"currency"),i()(),p(7,"p-divider",5),n(8,"p-button",6),s("onClick",function(){return a.refreshBalance()}),i(),n(9,"p-button",7),s("onClick",function(){return a.openCashDialog()}),i(),n(10,"p-button",8),s("onClick",function(){return a.navigateHistory()}),i()()(),n(11,"p-dialog",9),w("visibleChange",function(v){return k(a.cashDialogVisible,v)||(a.cashDialogVisible=v),v}),s("onHide",function(){return a.resetDialog()}),c(12,ge,21,15,"ng-template",10)(13,fe,2,0,"ng-template",11),i()),m&2&&(l(3),r("isLoading",a.loading_balance())("loadingBar",!0),l(2),D("Cash: ",M(6,7,a.balance().balance),""),l(6),B(F(9,pe)),T("visible",a.cashDialogVisible),r("modal",!0))},dependencies:[J,P,ee,Q,K,O,ie,ne,U,A,R,z,L,G,W,oe,ae,q,N,I,Y,X,re,le,$,Z,ce,me],styles:["[_nghost-%COMP%]  .p-divider.p-divider-vertical .p-divider-content{padding:0}"]})}}return t})();export{je as a};
