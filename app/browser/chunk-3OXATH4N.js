import{Gb as g,Hb as h,R as e,ab as a,m as o,p as r}from"./chunk-D4YDXMC2.js";import{g as n}from"./chunk-TSRGIXR5.js";var u=(()=>{class s{constructor(){this.http=r(a),this.notificationService=r(g),this.api=r(h),this.printPageDialogVisible=e(!1),this.printPageSettingsLoading=e(!1),this.printPageSettings=e(null),this.formSubmitLoading=e(!1),this.printerDialogVisible=e(!1),this.printerName=e(localStorage.getItem("printer-name")||"XP-80C"),this.getPrintPageSettings()}getPrintPageSettings(){this.printPageSettingsLoading.set(!0),this.http.get(`${this.api.host()}/settings/printpage-settings`).subscribe({next:t=>{this.printPageSettingsLoading.set(!1),this.printPageSettings.set(t)},error:t=>{console.log(t),this.notificationService.showError(t.error,"home"),this.printPageSettingsLoading.set(!1)}})}submitPrintPageForm(t){this.formSubmitLoading.set(!0),this.http.put(`${this.api.host()}/settings/printpage-settings`,t).subscribe({next:i=>{this.notificationService.showSuccess(i.message,"home"),this.getPrintPageSettings(),this.formSubmitLoading.set(!1),this.printPageDialogVisible.set(!1)},error:i=>{this.notificationService.showError(i.error,"home"),this.formSubmitLoading.set(!1)}})}submitPrinterName(t){return n(this,null,function*(){try{yield localStorage.setItem("printer-name",t.printer_name),yield this.printerName.set(localStorage.getItem("printer-name")),this.printerDialogVisible.set(!1),this.notificationService.showSuccess("Printer name updates successfully!","home")}catch(i){this.notificationService.showError(i,"home")}})}static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275prov=o({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();export{u as a};
