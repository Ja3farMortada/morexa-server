import{a as l}from"./chunk-3OXATH4N.js";import{a as w}from"./chunk-CM4NZ263.js";import{Gb as d,Hb as p,ab as a,c,m as s,p as n}from"./chunk-D4YDXMC2.js";import{g as r}from"./chunk-TSRGIXR5.js";var Y=(()=>{class o{constructor(){this.dateService=n(w),this.http=n(a),this.api=n(p),this.notificationService=n(d),this.settingsService=n(l),this.invoice=new c({}),this.printPageSettings=this.settingsService.printPageSettings}thermalPrint(e,i){return r(this,null,function*(){let t=structuredClone(e);t.order_datetime=this.dateService.formatDate(e.order_datetime,"DD-MM-YYYY"),t.type=i,t.printer=localStorage.getItem("printer-name")||"XP-80C",t.settings=this.printPageSettings(),window.electron&&(yield window.electron.send("thermal-print",t))})}openCashDrawer(){return r(this,null,function*(){this.http.get(`${this.api.host()}/print/open-cash-drawer`).subscribe({next:e=>{console.log(e)},error:e=>{console.log(e)}})})}print(e,i){return r(this,null,function*(){let t=structuredClone(e);t.order_datetime=this.dateService.formatDate(e.order_datetime,"DD-MM-YYYY"),t.type=i,window.electron&&(yield window.electron.send("print-invoice",t))})}printStatement(e){return r(this,null,function*(){window.electron&&(yield window.electron.send("print-statement",e))})}printDelivery(e){return r(this,null,function*(){let i=structuredClone(e);i.order_datetime=this.dateService.formatDate(e.order_datetime,"DD-MM-YYYY"),window.electron&&(yield window.electron.send("print-delivery",i))})}printStock(e){return r(this,null,function*(){window.electron&&(yield window.electron.send("print-stock",e))})}backup(){return r(this,null,function*(){if(window.electron){let e=yield window.electron.send("backup");e=="success"?this.notificationService.showSuccess("Backup completed successfully!","home"):e=="canceled"?this.notificationService.showInfo(e,"home"):(console.log(e),this.notificationService.showError(e,"home"))}})}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=s({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();export{Y as a};
