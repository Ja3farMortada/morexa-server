import{a as f}from"./chunk-HY5F37U4.js";import{Kb as l,Lb as c,U as s,d as a,eb as p,o as n,s as o}from"./chunk-4RWQR7BF.js";var D=(()=>{class r{constructor(){this.api=o(c),this.http=o(p),this.notificationsService=o(l),this.dateService=o(f),this.host=this.api.host,this.revenue=s({}),this.loading_report=s(!1),this.startDate=s(this.dateService.getStartOfMonth()),this.endDate=s(this.dateService.getCurrentDate()),this.loadingExpenses=s(!1),this.expenses=s({}),this.loadingSupplierPayments=s(!1),this.supplierPayments=s({}),this.loadingTopSales=s(!1),this.topSales=s([]),this.selectedProduct=s(null),this.topCategories=new a([])}getRevenue(e,t){e?(e=this.dateService.formatDate(e,"YYYY-MM-DD"),t=this.dateService.formatDate(t,"YYYY-MM-DD")):(e=this.startDate(),t=this.endDate()),this.loading_report.set(!0),this.http.get(`${this.host()}/report/revenue/${e}&${t}`).subscribe({next:i=>{this.revenue.set(i)},error:i=>{this.notificationsService.showError(i,"home"),this.loading_report.set(!1)},complete:()=>{this.loading_report.set(!1)}})}getExpenses(e=this.startDate(),t=this.endDate()){e?(e=this.dateService.formatDate(e,"YYYY-MM-DD"),t=this.dateService.formatDate(t,"YYYY-MM-DD")):(e=this.startDate(),t=this.endDate()),this.loadingExpenses.set(!0),this.http.get(`${this.host()}/report/expenses/${e}&${t}`).subscribe({next:i=>{this.expenses.set(i)},error:i=>{this.notificationsService.showError(i,"home"),this.loadingExpenses.set(!1)},complete:()=>{this.loadingExpenses.set(!1)}})}getSupplierPayments(e=this.startDate(),t=this.endDate()){e?(e=this.dateService.formatDate(e,"YYYY-MM-DD"),t=this.dateService.formatDate(t,"YYYY-MM-DD")):(e=this.startDate(),t=this.endDate()),this.loadingSupplierPayments.set(!0),this.http.get(`${this.host()}/report/supplier-payments/${e}&${t}`).subscribe({next:i=>{this.supplierPayments.set(i)},error:i=>{this.notificationsService.showError(i,"home"),this.loadingSupplierPayments.set(!1)},complete:()=>{this.loadingSupplierPayments.set(!1)}})}getTopSales(e=this.startDate(),t=this.endDate(),i=this.selectedProduct()){e?(e=this.dateService.formatDate(e,"YYYY-MM-DD"),t=this.dateService.formatDate(t,"YYYY-MM-DD")):(e=this.startDate(),t=this.endDate()),this.loadingTopSales.set(!0),this.http.get(`${this.host()}/report/top-sales/${e}&${t}&${i}`).subscribe({next:h=>{this.topSales.set(h),this.loadingTopSales.set(!1)},error:h=>{this.notificationsService.showError(h,"home"),this.loadingTopSales.set(!1)}})}getTopCategories(e=this.startDate(),t=this.endDate()){e?(e=this.dateService.formatDate(e,"YYYY-MM-DD"),t=this.dateService.formatDate(t,"YYYY-MM-DD")):(e=this.startDate(),t=this.endDate()),this.http.get(`${this.host()}/report/categories/${e}&${t}`).subscribe({next:i=>{this.topCategories.next(i)},error:i=>{this.notificationsService.handleError(i.error,"home")}})}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{D as a};
