import{a as l}from"./chunk-2IAGA2KS.js";import{b as f}from"./chunk-MAZQTZTP.js";import{b as c}from"./chunk-2LVZO5F4.js";import{Gb as a,Hb as n,R as s,ab as h,m as o,p as i}from"./chunk-D4YDXMC2.js";var H=(()=>{class r{constructor(){this.http=i(h),this.apiService=i(n),this.notificationService=i(a),this.cashBalanceService=i(l),this.userService=i(c),this.stockService=i(f),this.salesHistory=s([]),this.paymentsHistory=s([]),this.signal_loading=s(!1),this.moneyTransfersHistory=s([]),this.returnHistory=s([]),this.selectedOrderItems=s([]),this.loadingDelete=s(!1),this.receiptsHistory=s([]),this.purchasesHistory=s([]),this.selectedPurchaseItems=s([])}fetchSalesHistory(t=null){this.signal_loading.set(!0),this.http.post(`${this.apiService.host()}/history/sales/search`,t).subscribe({next:e=>{this.salesHistory.set(e),this.signal_loading.set(!1)},error:e=>{this.signal_loading.set(!1),this.notificationService.handleError(e.error,"home")}})}fetchOrderItemsById(t){t.length>0&&this.http.post(`${this.apiService.host()}/history/sales/details`,t).subscribe({next:e=>{this.selectedOrderItems.set(e)},error:e=>{this.notificationService.showError(e.error,"home")}})}deleteInvoice(t){this.loadingDelete.set(!0),this.http.delete(`${this.apiService.host()}/sell-orders/${t}`).subscribe({next:e=>{this.notificationService.showSuccess(e.message,"home")},error:e=>{this.notificationService.handleError(e.error,"home"),this.loadingDelete.set(!1)},complete:()=>{this.stockService.getItems(),this.loadingDelete.set(!1),this.cashBalanceService.getBalance(),this.fetchSalesHistory()}})}fetchPaymentHistory(t){this.signal_loading.set(!0),this.http.post(`${this.apiService.host()}/history/payment/search`,t).subscribe({next:e=>{this.paymentsHistory.set(e),this.signal_loading.set(!1)},error:e=>{this.signal_loading.set(!1),this.notificationService.handleError(e.error,"home")}})}fetchMoneyTransferHistory(t){this.signal_loading.set(!0),this.http.post(`${this.apiService.host()}/history/money-transfer/search`,t).subscribe({next:e=>{this.moneyTransfersHistory.set(e),this.signal_loading.set(!1)},error:e=>{this.signal_loading.set(!1),this.notificationService.handleError(e.error,"home")}})}fetchReturnHistory(t){this.signal_loading.set(!0),this.http.post(`${this.apiService.host()}/history/return/search`,t).subscribe({next:e=>{this.returnHistory.set(e),this.signal_loading.set(!1)},error:e=>{this.signal_loading.set(!1),this.notificationService.handleError(e.error,"home")}})}fetchPurchasesHistory(t=null){this.signal_loading.set(!0),this.http.post(`${this.apiService.host()}/history/purchase/search`,t).subscribe({next:e=>{this.purchasesHistory.set(e),this.signal_loading.set(!1)},error:e=>{this.signal_loading.set(!1),this.notificationService.handleError(e.error,"home")}})}fetchPurchaseItemsById(t){t.length>0&&this.http.post(`${this.apiService.host()}/history/purchases/details`,t).subscribe({next:e=>{this.selectedPurchaseItems.set(e)},error:e=>{this.notificationService.showError(e.error,"home")}})}fetchReceiptsHistory(t){this.signal_loading.set(!0),this.http.post(`${this.apiService.host()}/history/receipt/search`,t).subscribe({next:e=>{this.receiptsHistory.set(e),this.signal_loading.set(!1)},error:e=>{this.signal_loading.set(!1),this.notificationService.handleError(e.error,"home")}})}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275prov=o({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{H as a};
